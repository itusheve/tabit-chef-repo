<div class="card bg-light dashboard-home-card">
    <div class="card-header bg-light">
        <span class="font-weight-bold text-dark" *ngIf="cardData" i18n="@@orsLastDay">{cardData.tag, select, currentBd {Today} previousBd {Yesterday}}</span>
        <span [ngClass]="cardData.tag ? 'text-secondary' : 'font-weight-bold text-dark'">{{cardData?.title || '&nbsp;'}}</span>
    </div>
    <dx-load-indicator [(visible)]="!cardData || cardData.loading"></dx-load-indicator>
    <div *ngIf="cardData && !cardData.loading" class="card-body">
        <div class="row">
            <div class="col-7 border-right">
                <div class="row">
                    <div class="col-12">
                        <h3 class="text-dark">{{cardData.sales | curr:'0'}}<br/>
                            <span *ngIf="cardData.salesComment" class="text-danger text-sm" i18n="@@salesComment">{cardData.salesComment, select, NotFinal {Not Final}}</span>
                        </h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <table class="table table-borderless table-sm sales-table">
                            <tr *ngIf="cardData.trends && cardData.trends.yearAvg && cardData.trends.yearAvg.status==='ready'">
                                <td><i class="icon" style="display: inline-block" [ngClass]="cardData.trends?.yearAvg?.val > 0 ? 'up' : 'down'"></i></td>
                                <td>{{cardData.trends?.yearAvg?.val | percent:'1.1-1'}}</td>
                                <td i18n="@@lastYear">Last year</td>
                            </tr>
                            <tr *ngIf="cardData.trends && cardData.trends.fourWeekAvg && cardData.trends.fourWeekAvg.status==='ready'">
                                <td><i class="icon" style="display: inline-block" [ngClass]="cardData.trends?.fourWeekAvg?.val > 0 ? 'up' : 'down'"></i></td>
                                <td>{{cardData.trends?.fourWeekAvg?.val | percent:'1.1-1'}}</td>
                                <td i18n="@@fourWeekAvg">4 Week</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-5">
                <div class="row">
                    <div class="col-12">
                        <table class="table table-borderless table-sm">
                            <tr *ngIf="cardData.reductions && cardData.reductions.cancellation_pct">
                                <td *ngIf="cardData.reductions && cardData.reductionsLastThreeMonthsAvg"><i class="icon" style="display: inline-block" [ngClass]="cardData.reductions?.cancellation_pct >= cardData.reductionsLastThreeMonthsAvg?.cancellation_pct ? 'up' : 'down'"></i></td>
                                <td>{{cardData.reductions?.cancellation_pct | percent:'1.1-1'}}</td>
                                <td i18n="@@cancellations">Cancellations</td> <!--ביטולים-->
                            </tr>
                            <tr *ngIf="cardData.reductions && cardData.reductions.retention_pct">
                                <td *ngIf="cardData.reductions && cardData.reductionsLastThreeMonthsAvg"><i class="icon" style="display: inline-block" [ngClass]="cardData.reductions?.retention_pct >= cardData.reductionsLastThreeMonthsAvg?.retention_pct ? 'up' : 'down'"></i></td>
                                <td>{{cardData.reductions?.retention_pct | percent:'1.1-1'}}</td>
                                <td i18n="@@retention">Retention</td>
                            </tr>
                            <tr *ngIf="cardData.reductions && cardData.reductions.operational_pct">
                                <td *ngIf="cardData.reductions && cardData.reductionsLastThreeMonthsAvg"><i class="icon" style="display: inline-block" [ngClass]="cardData.reductions?.operational_pct >= cardData.reductionsLastThreeMonthsAvg?.operational_pct ? 'up' : 'down'"></i></td>
                                <td>{{cardData.reductions?.operational_pct | percent:'1.1-1'}}</td>
                                <td i18n="@@operational">Operational</td> <!--ביטולים-->
                            </tr>
                            <tr *ngIf="cardData.reductions && cardData.reductions.organizational_pct">
                                <td *ngIf="cardData.reductions && cardData.reductionsLastThreeMonthsAvg"><i class="icon" style="display: inline-block" [ngClass]="cardData.reductions?.organizational_pct >= cardData.reductionsLastThreeMonthsAvg?.organizational_pct ? 'up' : 'down'"></i></td>
                                <td>{{cardData.reductions?.organizational_pct | percent:'1.1-1'}}</td>
                                <td i18n="@@organizational">Organizational</td> <!--ביטולים-->
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-footer bg-light" *ngIf="cardData && cardData.diners > 0">
        <div class="row">
            <div class="col"><span><i class="icon user" style="display: inline-block"></i> {{cardData?.diners | number:'1.0-0'}}</span></div>
            <div class="col">PPA {{cardData?.ppa | curr}}</div>
        </div>
    </div>
</div>
