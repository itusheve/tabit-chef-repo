
<div class="flex d-col dayView">
    <app-day-selector
            class="widget noPadding daySelectorFixed"
            [currentValue]="day"
            [options]="daySelectorOptions"
            (onDateChanged)="onDateChanged($event)">
    </app-day-selector>

    <div *ngIf="!hasData">
        <div class="card">
            <div class="card-body bg-white">
                <div *ngIf="hasNoDataForToday">
                    <div>
                        <div class="text-center" i18n="@@noDataAvailableForToday">No data available for today</div>
                    </div>
                </div>
                <div *ngIf="!hasNoDataForToday">
                    <div>
                        <div class="text-center">
                            <dx-load-indicator class="text-center"></dx-load-indicator>
                        </div>
                        <p class="text-center saving"><span i18n="@@fetching">Fetching</span><span>.</span><span>.</span><span>.</span></p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div *ngIf="hasData">
        <app-day-orders-table
                class="widget"
                style="padding-bottom: 0px;"
                [lastViewed]="drilledOrder"
                [orders]="orders"
                [bdIsCurrentBd]="bdIsCurrentBd"
                [openOrders]="openOrders"
                (onOrderClicked)="onOrderClicked($event)"
        ></app-day-orders-table>

        <app-day-sales-table
                class="widget"
                title="Summary"
                i18n-title="@@summary"
                [data]="dailySummaryTblData?.data">
        </app-day-sales-table>

        <ng-container *ngFor="let tblData of byShiftSummaryTblsData">
            <app-day-sales-table
                    *ngIf="tblData.data.length"
                    class="widget"
                    [title]="tblData?.title"
                    [data]="tblData?.data">
            </app-day-sales-table>
        </ng-container>

        <app-day-sales-by-sub-department-table
                class="widget"
                [bd]="day"
                [salesBySubDepartment]="salesBySubDepartment"
        ></app-day-sales-by-sub-department-table>

        <app-most-sold-items-table
                class="widget"
                [itemsData]="mostSoldItems"
        ></app-most-sold-items-table>

        <app-most-returned-items-table
                class="widget"
                [itemsData]="mostReturnedItems"
        ></app-most-returned-items-table>

        <!-- TODO US missing measures -->
        <app-payments-table
                class="widget"
                [bd]="day"
                [paymentsData]="paymentsData"
        ></app-payments-table>

        <app-operational-errors-table
                class="widget"
                [operationalErrorsData]="operationalErrorsData"
                [lastViewed]="drilledOrderNumber"
                (onOrderClicked)="onOrderClicked_orderNumber($event)"
        ></app-operational-errors-table>

        <app-retention-table
                class="widget"
                [retentionData]="retentionData"
                [lastViewed]="drilledOrderNumber"
                (onOrderClicked)="onOrderClicked_orderNumber($event)"
        ></app-retention-table>

        <app-month-summary-table
                class="widget"
                [month]="day"
                [mtdBusinessData]="mtdBusinessData"
        ></app-month-summary-table>
    </div>
</div>
<div class="flex d-col drill" *ngIf="drill">
    <app-order-view style="width:100%;" [orderNumber]="drilledOrderNumber" [order]="drilledOrder" [orders]="orders"></app-order-view>
</div>

